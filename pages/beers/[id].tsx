import type { NextPage, GetServerSidePropsContext } from "next";
import Head from "next/head";
import BeerInfo from "../../components/beer-info/BeerInfo";
import { getBeerInfo } from "../../data";
import type { Beer } from "../../types";

interface BeerProps {
  beer: Beer;
}

const Beer: NextPage<BeerProps> = ({ beer }) => {
  return (
    <div>
      <Head>
        <title>{beer.name} beer</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <BeerInfo beer={beer} />
    </div>
  );
};

export async function getServerSideProps(
  context: GetServerSidePropsContext<{ id: string }>
) {
  const { params } = context;
  const beer = await getBeerInfo(parseInt(params?.id ?? "", 10));
  if (!beer) return { notFound: true };
  return { props: { beer } };
}

export default Beer;
